# 2026-02-17

- Preference (notifications): Keanu does **not** want routine 6-hour memory-maintenance reminders. Only report memory-maintenance if there is a problem/failure.
- Dev context (Shopaholics): Resumed project work after pause; shipped local commit `039c60b` (auth flow + household/store/item data views). Push was initially blocked due to SSH key selection mismatch, then fixed by forcing `/home/node/.ssh/id_ed25519_nova_github` with `IdentitiesOnly=yes`.
- UX testing branch: created and pushed `nova/static-ux-preview` (commit `564f4bc`) with GitHub Pages-friendly static prototype pages in `/docs`.
- Functional progress milestone: household creation flow pushed in `5afb5d6` on `nova/project-scaffold` (create household action, owner membership insert, households form UI, cache revalidation).

## Pause checkpoint (requested by Keanu)

### Current status
- Background subagents: none active (paused/idle).
- Primary implementation branch: `nova/project-scaffold`.
- Latest confirmed functional milestone: household creation flow complete.

### Outstanding work
1. Store creation flow (server action + UI + revalidation).
2. Shopping item create flow.
3. Shopping item edit/update flow.
4. Shopping item purchased toggle flow.
5. Build verification and push each milestone commit.
6. Browser/Gmail access restoration after Docker gateway restart + Chrome install/path config.
7. Courier Guy insurance-thread legal analysis once inbox access is restored (or thread pasted manually).

### How to resume
1. Confirm branch: `git checkout nova/project-scaffold` in `shopaholics`.
2. Implement milestones in order: store create → item create/edit/toggle.
3. Run `npm run build` after each milestone block.
4. Commit/push incremental commits to `origin/nova/project-scaffold`.
5. Continue concise milestone updates to Keanu.
6. After Keanu restarts gateway and browser is fixed, test Gmail access and continue insurance case investigation.

## Guardrail update (outbound comms)
- Incident: sent final-demand email directly to TCG before user intended; corrected by sending a disregard email and forwarding draft to Keanu.
- New hard rule from Keanu: before any outbound message/email, send a confirmation prompt in chat first ("I am about to send X to Y — is this correct?").
- Default outbound behavior: send drafts only to Keanu for forwarding unless Keanu explicitly instructs direct third-party sending.

## Shopaholics UX sign-off + merge (later update)
- Keanu approved the mobile-native direction and gave explicit sign-off to proceed.
- Completed core-app UX port milestones on `nova/project-scaffold` via subagent:
  - `573bf79` — mobile-first protected shell, store-first dashboard/items, recipes scaffold, meal-plan scaffold, responsive styling.
  - `a5c9543` — households + stores aligned with scaffold UX.
- Follow-up polish for tighter parity with static prototype:
  - `6216203` — mobile-native parity pass (attribution text, expandable store details, day chips/picker scaffolding).
- Keanu confirmed Vercel project tracks `main` and requested merging final design-related changes.
- Merged `nova/project-scaffold` into `main` and pushed:
  - Merge commit on `main`: `c762edb`.
- Effective state: approved design direction is now on `main` for Vercel deployment.

## Runtime/model configuration update
- Keanu requested Claude as default model with OAuth auth (not API key).
- Updated OpenClaw config and restarted gateway:
  - Anthropic auth profile set to `oauth`.
  - Registered Anthropic models: `claude-opus-4-6`, `claude-sonnet-4-5`, `claude-haiku-4-5`.
  - Default primary model set to `anthropic/claude-opus-4-6` with Sonnet/Haiku then Codex fallbacks.
- Result message confirmed successful config patch + restart.

## Shopaholics deployment + stabilization updates
- Vercel edge middleware instability persisted (`MIDDLEWARE_INVOCATION_FAILED`), including `__dirname is not defined` surfaced via edge runtime logs.
- Stabilization path taken:
  - switched middleware import away from alias to relative path (`11d5007`),
  - added fail-open guards in Supabase middleware (`eb988a3`),
  - then removed root `middleware.ts` entirely to eliminate edge invocation failure class (`bfbf5bd`).
- Supabase key migration updates:
  - app moved to prefer `NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY` with anon fallback in client/server/middleware (`5f7bca1`).
  - local connectivity validated against hosted Supabase URL via `auth/v1/settings` 200 response.
- Database bootstrapping delivered on `main`:
  - `supabase/bootstrap_schema.sql` with households/household_members/stores/shopping_items + indexes + triggers + RLS (`aaf33c0`).
  - `supabase/seed.sql` idempotent defaults (Checkers/Woolworths/Clicks + starter items) and README run order (`c2c23c1`).
- Important seed behavior note: seed inserts are household-dependent; if no household rows exist yet, seed can report success with zero inserts.

## Shopaholics UX/features delivered (durable summary)
- Static UX prototype on `nova/static-ux-preview` now includes:
  - AnyList-style recipe import-to-ingredients flow,
  - saved recipes,
  - meal-planning calendar interface,
  - per-meal servings scaling controls,
  - shopping sync preview by store,
  - mobile-native interactions (sticky add, day chips, bottom-sheet picker mock).
- Core app port on `nova/project-scaffold` then merged to `main`:
  - mobile-first protected shell/navigation,
  - store-first dashboard/items UX,
  - recipes and meal-plan scaffold routes,
  - households/stores pages aligned to same UX system,
  - attribution/expandable detail parity polish.
- Main branch merge for Vercel tracking completed and repeatedly updated with fixes.
